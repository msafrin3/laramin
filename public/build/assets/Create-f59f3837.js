import{r as P,c as i,a as f,u as s,w as S,F as u,y as D,o as d,X as $,b as t,d as F,e as n,j as p,i as h,t as c,f as _,v,n as E,g as m,O as j}from"./app-c9f7bbe9.js";import{_ as K}from"./AuthenticatedLayout-0888bcd6.js";import z from"./ContentHeader-8a756acf.js";import{S as I}from"./sweetalert2.all-862f50b2.js";import"./leaflet-4351146f.js";const J={class:"row justify-content-center"},R={class:"col-md-8"},X={class:"card"},Z=t("div",{class:"card-header"},[t("h3",{class:"card-title mb-0"},"Tambah Maklumat Bencana")],-1),q={class:"card-body"},G={class:"row mb-3"},H=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[m("Jenis Bencana "),t("span",{class:"text-danger"},"*")])],-1),Q={class:"col-md-6"},W=["value"],Y={key:0,class:"text-danger"},tt={class:"row mb-3"},et=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[m("Nama Bencana "),t("span",{class:"text-danger"},"*")])],-1),st={class:"col-md-9"},at={key:0,class:"text-danger"},ot={class:"row mb-3"},lt=t("div",{class:"col-md-3"},[t("label",{classs:"form-label"},"Keterangan")],-1),it={class:"col-md-9"},dt={key:0,class:"text-danger"},nt={class:"row mb-3"},rt=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[m("Level "),t("span",{class:"text-danger"},"*")])],-1),ct={class:"col-md-4"},mt=["value"],ut={class:"row mb-3"},pt=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[m("Tarikh Mula & Akhir "),t("span",{class:"text-danger"},"*")])],-1),_t={class:"col-md-9"},vt={class:"input-group"},bt={class:"row mb-3"},ht=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[m("Negeri "),t("span",{class:"text-danger"},"*")])],-1),gt={class:"col-md-6"},ft=t("option",{value:""},"-- Pilih Negeri --",-1),yt=["value"],kt={key:0,class:"text-danger"},xt={class:"row mb-3"},wt=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[m("Daerah "),t("span",{class:"text-danger"},"*")])],-1),Lt={class:"col-md-6"},Vt=t("option",{value:""},"-- Pilih Daerah --",-1),Bt=["value"],Mt={key:0,class:"text-danger"},Tt={class:"row mb-3"},Ut=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},"Mukim")],-1),St={class:"col-md-6"},jt=["value"],Nt={class:"row mb-3"},Ot=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},"Lokasi")],-1),At={class:"col-md-9"},Ct={class:"input-group"},Pt=t("i",{class:"ri-map-pin-fill fs-17"},null,-1),Dt=[Pt],$t={class:"row mb-3"},Ft=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[m("Status "),t("span",{class:"text-danger"},"*")])],-1),Et={class:"col-md-3"},Kt=t("option",{value:"Aktif"},"Aktif",-1),zt=t("option",{value:"Tidak Aktif"},"Tidak Aktif",-1),It=[Kt,zt],Jt={key:0,class:"text-danger"},Rt={class:"card-footer"},Xt={class:"d-flex gap-2 justify-content-end"},Zt=t("button",{type:"submit",class:"btn btn-success"},"Simpan",-1),qt=D('<div id="mapModal" class="modal fade"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="myModalLabel">Peta Lokasi</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body" style="position:relative;"><div class="form-group mb-3"><input id="searchbox" type="text" class="form-control" placeholder="Carian tempat" style="width:40%;"></div><div id="map" style="width:100%;height:600px;"></div></div><div class="modal-footer"><button type="button" class="btn btn-light" data-bs-dismiss="modal">Batal</button><button type="button" class="btn btn-primary" data-bs-dismiss="modal">Set Lokasi</button></div></div></div></div>',1),te={__name:"Create",props:{types:Object,states:Object,districts:Object,parishes:Object,errors:Object,levels:Object},setup(l){const N=[{title:"Pengurusan Bencana",active:!1,link:route("disaster.index")},{title:"Tambah Baru",active:!0}];let O=L.icon({iconUrl:"/images/marker-icon.png",shadowUrl:"/images/marker-shadow.png"}),x=()=>{setTimeout(function(){const r=L.map("map").setView([4.4594095,102.2309874],8);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(r);const a=document.getElementById("searchbox"),e={types:["geocode"],componentRestrictions:{country:"my"}},M=new google.maps.places.Autocomplete(a,e);var g;M.addListener("place_changed",()=>{g!=null&&r.removeLayer(g);const T=M.getPlace();var y=T.geometry.location.lat(),k=T.geometry.location.lng();w(y,k),r.setView([y,k],18),g=L.marker([y,k],{draggable:!0,icon:O}).addTo(r),g.on("dragend",function(U){var A=U.target.getLatLng().lat,C=U.target.getLatLng().lng;w(A,C)})})},500)},w=(r,a)=>{o.latitude=r,o.longitude=a},o=P({kategori_id:null,name:null,description:null,level_id:null,datetime_start:null,datetime_end:null,state_id:null,district_id:null,parish_id:null,latitude:null,longitude:null,status:"Aktif"}),b={},V=()=>{j.get(route("disaster.create"),b,{preserveState:!0,replace:!0})},B=()=>{j.post(route("disaster.store"),o,{onSuccess:r=>{r.props.response.success&&I.fire("Berjaya!",r.props.response.success,"success")}})};return(r,a)=>(d(),i(u,null,[f(s($),{title:"Tambah Maklumat Bencana"}),f(K,null,{default:S(()=>[f(z,{title:"Tambah Maklumat Bencana",breadcrumbs:N}),t("div",J,[t("div",R,[t("div",X,[Z,t("form",{onSubmit:a[15]||(a[15]=F((...e)=>s(B)&&s(B)(...e),["prevent"]))},[t("div",q,[t("div",G,[H,t("div",Q,[n(t("select",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>s(o).kategori_id=e)},[(d(!0),i(u,null,h(l.types,e=>(d(),i("option",{key:e.id,value:e.id},c(e.name),9,W))),128))],512),[[p,s(o).kategori_id]]),l.errors.kategori_id?(d(),i("span",Y,c(l.errors.kategori_id),1)):_("",!0)])]),t("div",tt,[et,t("div",st,[n(t("input",{type:"text",class:"form-control",placeholder:"Masukkan Nama Bencana","onUpdate:modelValue":a[1]||(a[1]=e=>s(o).name=e)},null,512),[[v,s(o).name]]),l.errors.name?(d(),i("span",at,c(l.errors.name),1)):_("",!0)])]),t("div",ot,[lt,t("div",it,[n(t("textarea",{rows:"5",class:"form-control",placeholder:"Ketarangan Bencana","onUpdate:modelValue":a[2]||(a[2]=e=>s(o).description=e)},null,512),[[v,s(o).description]]),l.errors.description?(d(),i("span",dt,c(l.errors.description),1)):_("",!0)])]),t("div",nt,[rt,t("div",ct,[n(t("select",{class:"form-control","onUpdate:modelValue":a[3]||(a[3]=e=>s(o).level_id=e)},[(d(!0),i(u,null,h(l.levels,e=>(d(),i("option",{value:e.id},c(e.name),9,mt))),256))],512),[[p,s(o).level_id]])])]),t("div",ut,[pt,t("div",_t,[t("div",vt,[n(t("input",{type:"datetime-local",step:"any",class:"form-control",placeholder:"Tarikh Mula","onUpdate:modelValue":a[4]||(a[4]=e=>s(o).datetime_start=e)},null,512),[[v,s(o).datetime_start]]),n(t("input",{type:"datetime-local",step:"any",class:"form-control",placeholder:"Tarikh Akhir","onUpdate:modelValue":a[5]||(a[5]=e=>s(o).datetime_end=e)},null,512),[[v,s(o).datetime_end]])])])]),t("div",bt,[ht,t("div",gt,[n(t("select",{class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>s(o).state_id=e),onChange:a[7]||(a[7]=e=>{s(b).state_id=s(o).state_id,s(b).district_id=null,s(b).parish_id=null,s(V)()})},[ft,(d(!0),i(u,null,h(l.states,e=>(d(),i("option",{key:e.id,value:e.id},c(e.name),9,yt))),128))],544),[[p,s(o).state_id]]),l.errors.state_id?(d(),i("span",kt,c(l.errors.state_id),1)):_("",!0)])]),t("div",xt,[wt,t("div",Lt,[n(t("select",{class:"form-control","onUpdate:modelValue":a[8]||(a[8]=e=>s(o).district_id=e),onChange:a[9]||(a[9]=e=>{s(b).district_id=s(o).district_id,s(V)()})},[Vt,(d(!0),i(u,null,h(l.districts,e=>(d(),i("option",{key:e.id,value:e.id},c(e.name),9,Bt))),128))],544),[[p,s(o).district_id]]),l.errors.district_id?(d(),i("span",Mt,c(l.errors.district_id),1)):_("",!0)])]),t("div",Tt,[Ut,t("div",St,[n(t("select",{class:"form-control","onUpdate:modelValue":a[10]||(a[10]=e=>s(o).parish_id=e)},[(d(!0),i(u,null,h(l.parishes,e=>(d(),i("option",{key:e.id,value:e.id},c(e.name),9,jt))),128))],512),[[p,s(o).parish_id]])])]),t("div",Nt,[Ot,t("div",At,[t("div",Ct,[n(t("input",{type:"text",class:"form-control",placeholder:"Latitude","onUpdate:modelValue":a[11]||(a[11]=e=>s(o).latitude=e)},null,512),[[v,s(o).latitude]]),n(t("input",{type:"text",class:"form-control",placeholder:"Longitude","onUpdate:modelValue":a[12]||(a[12]=e=>s(o).longitude=e)},null,512),[[v,s(o).longitude]]),t("button",{class:"btn btn-info",type:"button","data-bs-toggle":"modal","data-bs-target":"#mapModal",onClick:a[13]||(a[13]=(...e)=>s(x)&&s(x)(...e))},Dt)])])]),t("div",$t,[Ft,t("div",Et,[n(t("select",{class:"form-control","onUpdate:modelValue":a[14]||(a[14]=e=>s(o).status=e)},It,512),[[p,s(o).status]]),l.errors.status?(d(),i("span",Jt,c(l.errors.status),1)):_("",!0)])])]),t("div",Rt,[t("div",Xt,[f(s(E),{href:r.route("disaster.index"),class:"btn btn-light"},{default:S(()=>[m("Batal")]),_:1},8,["href"]),Zt])])],32)])])])]),_:1}),qt],64))}};export{te as default};
