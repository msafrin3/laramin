import{r as z,c as d,a as x,u as s,w as j,F as g,y as E,o as n,X as F,b as t,d as K,e as r,v as f,t as c,f as k,j as w,i as P,n as A,g as y,O}from"./app-c9f7bbe9.js";import{_ as H}from"./AuthenticatedLayout-0888bcd6.js";import I from"./ContentHeader-8a756acf.js";import"./leaflet-4351146f.js";import{S as J}from"./sweetalert2.all-862f50b2.js";const R={class:"row justify-content-center"},X={class:"col-md-8"},Z={class:"card"},q=t("div",{class:"card-header"},[t("h3",{class:"card-title mb-0"},"Kemaskini Pusat Pemindahan")],-1),G={class:"card-body"},Q={class:"row mb-3"},W=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[y("Nama Pusat "),t("span",{class:"text-danger"},"*")])],-1),Y={class:"col-md-9"},tt={key:0,class:"text-danger"},et={class:"row mb-3"},st=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[y("Jenis Pusat "),t("span",{class:"text-danger"},"*")])],-1),lt={class:"col-md-7"},at=["value"],ot={key:0,class:"text-danger"},it={class:"row mb-3"},dt=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[y("Negeri "),t("span",{class:"text-danger"},"*")])],-1),nt={class:"col-md-6"},rt=t("option",{value:""},"-- Pilih Negeri --",-1),ct=["value"],mt={key:0,class:"text-danger"},ut={class:"row mb-3"},_t=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},[y("Daerah "),t("span",{class:"text-danger"},"*")])],-1),pt={class:"col-md-6"},ht=t("option",{value:""},"-- Pilih Daerah --",-1),bt=["value"],vt={key:0,class:"text-danger"},gt={class:"row mb-3"},ft=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},"Mukim")],-1),yt={class:"col-md-6"},xt=["value"],kt={class:"row mb-3"},wt=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},"Lokasi")],-1),Pt={class:"col-md-9"},Lt={class:"input-group"},Vt=t("i",{class:"ri-map-pin-fill fs-17"},null,-1),St=[Vt],Mt=t("hr",null,null,-1),Nt={class:"row mb-3"},jt=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},"Nama Pengurus PPS")],-1),Ot={class:"col-md-6"},Ut={class:"row mb-3"},Bt=t("div",{class:"col-md-3"},[t("label",{class:"form-label"},"No Telefon")],-1),Tt={class:"col-md-4"},Ct={class:"card-footer"},Dt={class:"d-flex gap-2 justify-content-end"},$t=t("button",{type:"submit",class:"btn btn-success"},"Simpan",-1),zt=E('<div id="mapModal" class="modal fade"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="myModalLabel">Modal Heading</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body" style="position:relative;"><div class="form-group mb-3"><input id="searchbox" type="text" class="form-control" placeholder="Carian tempat" style="width:40%;"></div><div id="map" style="width:100%;height:600px;"></div></div><div class="modal-footer"><button type="button" class="btn btn-light" data-bs-dismiss="modal">Batal</button><button type="button" class="btn btn-primary" data-bs-dismiss="modal">Set Lokasi</button></div></div></div></div>',1),It={__name:"Edit",props:{errors:Object,types:Object,states:Object,districts:Object,parishes:Object,shelter:Object},setup(i){const o=i,U=[{title:"Pusat Pemindahan",active:!1,link:route("shelter.index")},{title:"Tambah Baru",active:!0}];let a=z({name:o.shelter.name,shelter_type_id:o.shelter.shelter_type_id,state_id:o.shelter.state_id,district_id:o.shelter.district_id,parish_id:o.shelter.parish_id,latitude:o.shelter.latitude,longitude:o.shelter.longitude,pic_name:o.shelter.pic_name,pic_notel1:o.shelter.pic_notel1}),u={},V=()=>{O.get(route("shelter.edit",o.shelter),u,{preserveState:!0,replace:!0})},B=4.4594095,T=102.2309874,C=8,S=()=>{setTimeout(function(){var m=o.shelter.latitude==null?B:o.shelter.latitude,l=o.shelter.longitude==null?T:o.shelter.longitude,e=o.shelter.latitude==null?C:18;const _=L.map("map").setView([m,l],e);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(_);const D=document.getElementById("searchbox"),$={types:["geocode"],componentRestrictions:{country:"my"}},N=new google.maps.places.Autocomplete(D,$);var p;o.shelter.latitude!=null&&(p=L.marker([o.shelter.latitude,o.shelter.longitude],{draggable:!0}).addTo(_)),N.addListener("place_changed",()=>{p!=null&&_.removeLayer(p);const h=N.getPlace();var b=h.geometry.location.lat(),v=h.geometry.location.lng();a.latitude=b,a.longitude=v,_.setView([b,v],18),p=L.marker([b,v],{draggable:!0}).addTo(_)}),p.on("dragend",function(h){var b=h.target.getLatLng().lat,v=h.target.getLatLng().lng;a.latitude=b,a.longitude=v})},500)},M=()=>{O.put(route("shelter.update",o.shelter),a,{onSuccess:m=>{m.props.response.success&&J.fire("Berjaya!",m.props.response.success,"success")}})};return(m,l)=>(n(),d(g,null,[x(s(F),{title:"Kemaskini Puast Pemindahan"}),x(H,null,{default:j(()=>[x(I,{title:"Kemaskini Puast Pemindahan",breadcrumbs:U}),t("div",R,[t("div",X,[t("form",{onSubmit:l[12]||(l[12]=K((...e)=>s(M)&&s(M)(...e),["prevent"]))},[t("div",Z,[q,t("div",G,[t("div",Q,[W,t("div",Y,[r(t("input",{type:"text",class:"form-control",placeholder:"Masukkan Nama Pusat Pemindahan","onUpdate:modelValue":l[0]||(l[0]=e=>s(a).name=e)},null,512),[[f,s(a).name]]),i.errors.name?(n(),d("span",tt,c(i.errors.name),1)):k("",!0)])]),t("div",et,[st,t("div",lt,[r(t("select",{class:"form-control","onUpdate:modelValue":l[1]||(l[1]=e=>s(a).shelter_type_id=e)},[(n(!0),d(g,null,P(i.types,e=>(n(),d("option",{key:e.id,value:e.id},c(e.name),9,at))),128))],512),[[w,s(a).shelter_type_id]]),i.errors.shelter_type_id?(n(),d("span",ot,c(i.errors.shelter_type_id),1)):k("",!0)])]),t("div",it,[dt,t("div",nt,[r(t("select",{class:"form-control","onUpdate:modelValue":l[2]||(l[2]=e=>s(a).state_id=e),onChange:l[3]||(l[3]=e=>{s(u).state_id=s(a).state_id,s(u).district_id=null,s(u).parish_id=null,s(V)()})},[rt,(n(!0),d(g,null,P(i.states,e=>(n(),d("option",{key:e.id,value:e.id},c(e.name),9,ct))),128))],544),[[w,s(a).state_id]]),i.errors.state_id?(n(),d("span",mt,c(i.errors.state_id),1)):k("",!0)])]),t("div",ut,[_t,t("div",pt,[r(t("select",{class:"form-control","onUpdate:modelValue":l[4]||(l[4]=e=>s(a).district_id=e),onChange:l[5]||(l[5]=e=>{s(u).district_id=s(a).district_id,s(V)()})},[ht,(n(!0),d(g,null,P(i.districts,e=>(n(),d("option",{key:e.id,value:e.id},c(e.name),9,bt))),128))],544),[[w,s(a).district_id]]),i.errors.district_id?(n(),d("span",vt,c(i.errors.district_id),1)):k("",!0)])]),t("div",gt,[ft,t("div",yt,[r(t("select",{class:"form-control","onUpdate:modelValue":l[6]||(l[6]=e=>s(a).parish_id=e)},[(n(!0),d(g,null,P(i.parishes,e=>(n(),d("option",{key:e.id,value:e.id},c(e.name),9,xt))),128))],512),[[w,s(a).parish_id]])])]),t("div",kt,[wt,t("div",Pt,[t("div",Lt,[r(t("input",{type:"text",class:"form-control",placeholder:"Latitude","onUpdate:modelValue":l[7]||(l[7]=e=>s(a).latitude=e)},null,512),[[f,s(a).latitude]]),r(t("input",{type:"text",class:"form-control",placeholder:"Longitude","onUpdate:modelValue":l[8]||(l[8]=e=>s(a).longitude=e)},null,512),[[f,s(a).longitude]]),t("button",{class:"btn btn-info",type:"button","data-bs-toggle":"modal","data-bs-target":"#mapModal",onClick:l[9]||(l[9]=(...e)=>s(S)&&s(S)(...e))},St)])])]),Mt,t("div",Nt,[jt,t("div",Ot,[r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[10]||(l[10]=e=>s(a).pic_name=e)},null,512),[[f,s(a).pic_name]])])]),t("div",Ut,[Bt,t("div",Tt,[r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[11]||(l[11]=e=>s(a).pic_notel1=e)},null,512),[[f,s(a).pic_notel1]])])])]),t("div",Ct,[t("div",Dt,[x(s(A),{href:m.route("shelter.index"),class:"btn btn-light"},{default:j(()=>[y("Batal")]),_:1},8,["href"]),$t])])])],32)])])]),_:1}),zt],64))}};export{It as default};
