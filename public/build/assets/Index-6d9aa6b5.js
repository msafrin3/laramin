import{c as o,a as i,u as s,w as u,b as t,d as y,e as v,v as k,F as b,h as L,o as n,X as w,f as _,i as T,t as m,g as d,O as B}from"./app-a78d849f.js";import{_ as M}from"./AuthenticatedLayout-c9c7c268.js";import S from"./ContentHeader-777d0e8b.js";import j from"./Table-09aed583.js";import{S as x}from"./sweetalert2.all-3a9002d3.js";import{f as C}from"./index-a664f95c.js";import"./Pagination-8908ddef.js";import"./_plugin-vue_export-helper-c27b6911.js";const D={key:0,class:"mb-3"},O=t("button",{type:"button",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalGenerate"},[t("i",{class:"ri-add-circle-fill align-bottom me-1"}),d(" Jana Laporan ")],-1),V=[O],N={class:"card"},G=t("div",{class:"card-header"},[t("h3",{class:"card-title mb-0"},"Senarai Laporan Terkini Kejadian Bencana")],-1),J={class:"card-body"},P=t("tr",null,[t("th",null,"#"),t("th",null,"Tarikh Laporan"),t("th",null,"Dijana Oleh"),t("th",null,"Tindakan")],-1),F={class:"d-flex gap-2"},H=["href"],I=t("i",{class:"ri-eye-2-line align-bottom me-1"},null,-1),E=["href"],K=t("i",{class:"ri-download-2-line align-bottom me-1"},null,-1),U={key:0,type:"button",class:"btn btn-danger btn-sm"},X=t("i",{class:"ri-delete-bin-line align-bottom me-1"},null,-1),q={id:"modalGenerate",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel",style:{display:"none"},"aria-hidden":"true"},z={class:"modal-dialog"},A={class:"modal-content"},Q=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"myModalLabel"},"Jana Laporan"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),R={class:"modal-body"},W={class:"form-group"},Y=t("label",null,"Tarikh Laporan",-1),Z=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"Batal"),t("button",{type:"submit",class:"btn btn-success"},"Jana")],-1),dt={__name:"Index",props:{filters:Object,reports:Object},setup(l){const h=L().appContext.config.globalProperties.$iterationPaginated,f=[{title:"Laporan & Statistik",active:!0},{title:"Laporan Terkini Bencana",active:!0}];let c={report_date:null},p=()=>{B.post(route("report.store"),c,{onSuccess:e=>{e.props.response.success&&(x.fire("Berjaya!",e.props.response.success,"success"),$("#modalGenerate").modal("toggle"))}})};return(e,r)=>(n(),o(b,null,[i(s(w),{title:"Laporan Terkini Bencana"}),i(M,null,{default:u(()=>[i(S,{title:"Laporan Terkini Bencana",breadcrumbs:f}),e.$page.props.auth.user.can.includes("create-laporan-terkini")?(n(),o("div",D,V)):_("",!0),t("div",N,[G,t("div",J,[i(j,{"data-route":e.route("report.index"),filters:l.filters,data:l.reports},{thead:u(()=>[P]),default:u(()=>[t("tbody",null,[(n(!0),o(b,null,T(l.reports.data,(a,g)=>(n(),o("tr",null,[t("td",null,m(s(h)(l.reports,g)),1),t("td",null,m(s(C)(new Date(a.report_date),"yyyy-MM-dd HH:mm:ss")),1),t("td",null,m(a.created_by.name),1),t("td",null,[t("div",F,[t("a",{href:e.route("report.show",a),class:"btn btn-info btn-sm",target:"_blank"},[I,d(" Lihat ")],8,H),t("a",{href:e.route("report.show",{report:a,download:!0}),class:"btn btn-success btn-sm",target:"_blank"},[K,d(" Muat Turun ")],8,E),e.$page.props.auth.user.can.includes("delete-laporan-terkini")?(n(),o("button",U,[X,d(" Delete ")])):_("",!0)])])]))),256))])]),_:1},8,["data-route","filters","data"])])])]),_:1}),t("div",q,[t("div",z,[t("div",A,[Q,t("form",{onSubmit:r[1]||(r[1]=y((...a)=>s(p)&&s(p)(...a),["prevent"]))},[t("div",R,[t("div",W,[Y,v(t("input",{type:"datetime-local",step:"any",class:"form-control","onUpdate:modelValue":r[0]||(r[0]=a=>s(c).report_date=a)},null,512),[[k,s(c).report_date]])])]),Z],32)])])])],64))}};export{dt as default};
